{"version":3,"file":"blocks/auth-modal/frontend.js","mappings":"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","sources":["webpack://clear-blocks-plugin/webpack/bootstrap","webpack://clear-blocks-plugin/webpack/runtime/make namespace object","webpack://clear-blocks-plugin/./src/blocks/auth-modal/frontend.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","document.addEventListener('DOMContentLoaded', () => {\r\n  const openModalBtn = document.querySelectorAll('.open-modal')\r\n  const modalEl = document.querySelector('.wp-block-clearblocks-auth-modal')\r\n  const modalCloseEl = document.querySelectorAll('.modal-overlay, .modal-btn-close')\r\n\r\n  openModalBtn.forEach(el => {\r\n    el.addEventListener('click', event => {\r\n      event.preventDefault()\r\n\r\n      modalEl.classList.add('modal-show')\r\n    })\r\n  })\r\n\r\n  modalCloseEl.forEach(el => {\r\n    el.addEventListener('click', event => {\r\n      event.preventDefault()\r\n\r\n      modalEl.classList.remove('modal-show')\r\n    })\r\n  })\r\n\r\n  const tabs = document.querySelectorAll('.tabs a')\r\n  const signinForm = document.querySelector('#signin-tab')\r\n  const signupForm = document.querySelector('#signup-tab')\r\n\r\n  tabs.forEach(tab => {\r\n    tab.addEventListener('click', event => {\r\n      event.preventDefault()\r\n\r\n      tabs.forEach(currentTab => {\r\n        currentTab.classList.remove('active-tab')\r\n      })\r\n\r\n      event.currentTarget.classList.add('active-tab')\r\n      const activeTab = event.currentTarget.getAttribute('href')\r\n\r\n      if (activeTab === '#signin-tab') {\r\n        signinForm.style.display = 'block'\r\n        signupForm.style.display = 'none'\r\n      } else {\r\n        signinForm.style.display = 'none'\r\n        signupForm.style.display = 'block'\r\n      }\r\n    })\r\n  })\r\n\r\n  if (modalEl) {\r\n    signupForm.addEventListener('submit', async e => {\r\n      e.preventDefault()\r\n      const signupFieldset = signupForm.querySelector('fieldset')\r\n\r\n      signupFieldset.setAttribute('disabled', true)\r\n\r\n      const signupStatus = signupForm.querySelector('#signup-status')\r\n      signupStatus.innerHTML = `\r\n        <div class=\"modal-status modal-status-info\">\r\n          Please wait!, we are creating your account.\r\n        </div>\r\n      `\r\n      const formData = {\r\n        username: signupForm.querySelector('#su-name').value,\r\n        email: signupForm.querySelector('#su-email').value,\r\n        password: signupForm.querySelector('#su-password').value\r\n      }\r\n\r\n      const response = await fetch(ccb_auth_rest.signup, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(formData)\r\n      });\r\n\r\n      const responsejSON = await response.json()\r\n\r\n      if (responsejSON.status === 2) {\r\n        signupStatus.innerHTML = `\r\n          <div class=\"modal-status modal-status-success\">\r\n            Success! Your account has been created.\r\n          </div>\r\n        `\r\n        location.reload()\r\n      } else {\r\n        signupFieldset.removeAttribute('disabled')\r\n        signupStatus.innerHTML = `\r\n          <div class=\"modal-status modal-status-danger\">\r\n            Unable to create account! Please try again later.\r\n          </div>\r\n        `\r\n      }\r\n    });\r\n    signinForm.addEventListener('submit', async event => {\r\n      event.preventDefault()\r\n\r\n      const signinFieldset = signinForm.querySelector('fieldset')\r\n      const signinStatus = signinForm.querySelector('#signin-status')\r\n\r\n      signinFieldset.setAttribute('disabled', true)\r\n\r\n      signinStatus.innerHTML = `\r\n        <div class=\"modal-status modal-status-info\">\r\n          Please wait while we log you in!\r\n        </div>\r\n      `\r\n      const formData = {\r\n        user_login: signinForm.querySelector('#si-email').value,\r\n        password: signinForm.querySelector('#si-password').value\r\n      }\r\n\r\n      const response = await fetch(ccb_auth_rest.signin, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(formData)\r\n      });\r\n\r\n      const responseJSON = await response.json()\r\n\r\n      if (responseJSON.status === 2) {\r\n        signinStatus.innerHTML = `\r\n          <div class=\"modal-status modal-status-success\">\r\n            Successfully logged in!\r\n          </div>\r\n        `\r\n        location.reload()\r\n      } else {\r\n        signinFieldset.removeAttribute('disabled')\r\n        signinStatus.innerHTML = `\r\n          <div class=\"modal-status modal-status-danger\">\r\n            Login failed! Please check you credentials and try again.\r\n          </div>\r\n        `\r\n      }\r\n    });\r\n  }\r\n})"],"names":["document","addEventListener","openModalBtn","querySelectorAll","modalEl","querySelector","modalCloseEl","forEach","el","event","preventDefault","classList","add","remove","tabs","signinForm","signupForm","tab","currentTab","currentTarget","activeTab","getAttribute","style","display","e","signupFieldset","setAttribute","signupStatus","innerHTML","formData","username","value","email","password","response","fetch","ccb_auth_rest","signup","method","headers","body","JSON","stringify","responsejSON","json","status","location","reload","removeAttribute","signinFieldset","signinStatus","user_login","signin","responseJSON"],"sourceRoot":""}